/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { asyncPageGenerator } from './async-page-generator';
/**
 * @template Entity
 */
export class PageIterator {
    /**
     * @param {?} paginationFunction
     */
    constructor(paginationFunction) {
        //  AsyncPageGenerator<Entity>;
        this.done = false;
        this.pending = false;
        this[Symbol.asyncIterator] = (/**
         * @return {?}
         */
        () => this.asyncPageGenerator);
        this.asyncPageGenerator = asyncPageGenerator(paginationFunction);
    }
    /**
     * @return {?}
     */
    getNextPage() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            if (this.pending) {
                throw new Error('cannot queue pages (yet)');
            }
            if (this.done) {
                throw new Error('This PageIterator is done. Try creating a new one');
            }
            this.pending = true;
            const { value, done } = yield this.asyncPageGenerator.next();
            this.pending = false;
            this.done = done;
            return value;
        });
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    PageIterator.prototype.asyncPageGenerator;
    /** @type {?} */
    PageIterator.prototype.done;
    /**
     * @type {?}
     * @private
     */
    PageIterator.prototype.pending;
    /* Skipping unnamed member:
    [Symbol.asyncIterator] = () => this.asyncPageGenerator;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZS1pdGVyYXRvci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25ncngtZGF0YS1wYWdpbmF0aW9uLyIsInNvdXJjZXMiOlsibGliL3BhZ2luYXRpb24vaXRlcmF0b3IvcGFnZS1pdGVyYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDOzs7O0FBRzVELE1BQU0sT0FBTyxZQUFZOzs7O0lBS3ZCLFlBQVksa0JBQThDOztRQUhuRCxTQUFJLEdBQUcsS0FBSyxDQUFDO1FBQ1osWUFBTyxHQUFHLEtBQUssQ0FBQztRQXdCeEIsS0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDOzs7UUFBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUM7UUFyQnJELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxrQkFBa0IsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ25FLENBQUM7Ozs7SUFFSyxXQUFXOztZQUNmLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtnQkFDaEIsTUFBTSxJQUFJLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO2FBQzdDO1lBRUQsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNiLE1BQU0sSUFBSSxLQUFLLENBQUMsbURBQW1ELENBQUMsQ0FBQzthQUN0RTtZQUVELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO2tCQUVkLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRTtZQUU1RCxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztZQUNqQixPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7S0FBQTtDQUdGOzs7Ozs7SUEzQkMsMENBQWdDOztJQUNoQyw0QkFBb0I7Ozs7O0lBQ3BCLCtCQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzeW5jUGFnZUdlbmVyYXRvciB9IGZyb20gJy4vYXN5bmMtcGFnZS1nZW5lcmF0b3InO1xuaW1wb3J0IHsgUGFnaW5hdGlvbkZ1bmN0aW9uIH0gZnJvbSAnLi9wYWdpbmF0aW9uLWZ1bmN0aW9uJztcblxuZXhwb3J0IGNsYXNzIFBhZ2VJdGVyYXRvcjxFbnRpdHk+IHtcbiAgcHJpdmF0ZSBhc3luY1BhZ2VHZW5lcmF0b3I6IGFueTsgLy8gIEFzeW5jUGFnZUdlbmVyYXRvcjxFbnRpdHk+O1xuICBwdWJsaWMgZG9uZSA9IGZhbHNlO1xuICBwcml2YXRlIHBlbmRpbmcgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihwYWdpbmF0aW9uRnVuY3Rpb246IFBhZ2luYXRpb25GdW5jdGlvbjxFbnRpdHk+KSB7XG4gICAgdGhpcy5hc3luY1BhZ2VHZW5lcmF0b3IgPSBhc3luY1BhZ2VHZW5lcmF0b3IocGFnaW5hdGlvbkZ1bmN0aW9uKTtcbiAgfVxuXG4gIGFzeW5jIGdldE5leHRQYWdlKCk6IFByb21pc2U8RW50aXR5W10+IHtcbiAgICBpZiAodGhpcy5wZW5kaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBxdWV1ZSBwYWdlcyAoeWV0KScpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBQYWdlSXRlcmF0b3IgaXMgZG9uZS4gVHJ5IGNyZWF0aW5nIGEgbmV3IG9uZScpO1xuICAgIH1cblxuICAgIHRoaXMucGVuZGluZyA9IHRydWU7XG5cbiAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCB0aGlzLmFzeW5jUGFnZUdlbmVyYXRvci5uZXh0KCk7XG5cbiAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmRvbmUgPSBkb25lO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSAoKSA9PiB0aGlzLmFzeW5jUGFnZUdlbmVyYXRvcjtcbn1cbiJdfQ==